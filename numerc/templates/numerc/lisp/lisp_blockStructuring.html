{% extends '../layout.html' %} {% load static %} {% block content %}
<section id="block_structuring">
	<h4>Block Structure</h4>
	<p>So far, the square root procedure appears as such:</p>
	<pre class="language-scheme"><code>
		(define (sqrt x)
			(sqrt-iter 1.0 x))

		(define (sqrt-iter guess x)
			(if (good-enough? guess x)
				guess
				(sqrt-iter (improve guess x) x)))

		(define (improve guess x)
			(average guess (/ x guess)))

		(define (average x y)
			(/ (+ x y) 2))							

		(define (good-enough? guess x)
			(< (abs (- (square guess) x)) 0.001))

		(define (square x) 
			(* x x))
	</code></pre>
	<p>
		All that really matters here, however, is the square root procedure. The
		lower level details simply clutter the program. A better structure would be
		to <span class="italicsText">localize</span> all of the procedures that
		<span class="monoText">sqrt</span> needs, called
		<span class="italicsText">auxiliary procedures</span>. Thus:
	</p>
	<pre class="language-scheme"><code>
	(define (sqrt x)
		(define (sqrt-iter guess x)
			(if (good-enough? guess x)
				guess
				(sqrt-iter (improve guess x) x)))
		(define (improve guess x)
			(average guess (/ x guess)))
		(define (average x y)
			(/ (+ x y) 2))							
		(define (good-enough? guess x)
			(< (abs (- (square guess) x)) 0.001))
		(define (square x) 
			(* x x))	
		(sqrt-iter 1.0 x))
	</code></pre>
	<p>
		Nesting definitions in this manner is called
		<span class="term">block structure</span>. We can, however improve the
		structure. Notice that <span class="monoText">x</span> is bound to
		<span class="monoText">sqrt</span>,
		<span class="monoText">good-enough?</span>,
		<span class="monoText">improve</span>, and
		<span class="monoText">sqrt-iter</span>. Because
		<span class="monoText">x</span> is bound to
		<span class="monoText">sqrt</span>, it is a free variable for the other
		internal definitions, so we do not need to pass it explicitly as a parameter
		for the internal definitions:
	</p>
	<pre class="language-scheme"><code>
		(define (sqrt x)
			(define (sqrt-iter guess)
				(if (good-enough? guess)
					guess
					(sqrt-iter (improve guess))))
			(define (improve guess)
				(average guess (/ x guess)))
			(define (average x guess)
				(/ (+ x guess) 2))
			(define (good-enough? guess)
				(< (abs (- (square guess) x)) 0.001))
			(define (square x)
				(* x x))
			(sqrt-iter 1.0))
		</code></pre>
</section>
{% endblock %}
